# Doctrine Migration File Generated on 2012-09-19 17:09:33
# Migrating from 20120918213017 to 20120919174015

# Version 20120918213443
CREATE TABLE movie_directors (movie_id INT NOT NULL, director_id INT NOT NULL, INDEX IDX_3578A4C28F93B6FC (movie_id), INDEX IDX_3578A4C2899FB366 (director_id), PRIMARY KEY(movie_id, director_id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci ENGINE = InnoDB;
ALTER TABLE movie_directors ADD CONSTRAINT FK_3578A4C28F93B6FC FOREIGN KEY (movie_id) REFERENCES movies (id);
ALTER TABLE movie_directors ADD CONSTRAINT FK_3578A4C2899FB366 FOREIGN KEY (director_id) REFERENCES directors (id);

# Version 20120919001159

# Version 20120919001526
ALTER TABLE movies ADD slug VARCHAR(128) NOT NULL;
CREATE UNIQUE INDEX UNIQ_C61EED30989D9B62 ON movies (slug);

# Version 20120919002125
ALTER TABLE directors ADD slug VARCHAR(128) NOT NULL;
CREATE UNIQUE INDEX UNIQ_A6ADADC4989D9B62 ON directors (slug);
ALTER TABLE genres ADD slug VARCHAR(128) NOT NULL;
CREATE UNIQUE INDEX UNIQ_A8EBE516989D9B62 ON genres (slug);
ALTER TABLE tags ADD slug VARCHAR(128) NOT NULL;
CREATE UNIQUE INDEX UNIQ_6FBC9426989D9B62 ON tags (slug);

# Version 20120919174015
CREATE TABLE Link (id INT AUTO_INCREMENT NOT NULL, title VARCHAR(255) NOT NULL, url VARCHAR(255) NOT NULL, PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE movie_tags (movie_id INT NOT NULL, tag_id INT NOT NULL, INDEX IDX_9CDAB52B8F93B6FC (movie_id), INDEX IDX_9CDAB52BBAD26311 (tag_id), PRIMARY KEY(movie_id, tag_id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE movie_links (movie_id INT NOT NULL, link_id INT NOT NULL, INDEX IDX_AFC0BB848F93B6FC (movie_id), INDEX IDX_AFC0BB84ADA40271 (link_id), PRIMARY KEY(movie_id, link_id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
ALTER TABLE movie_tags ADD CONSTRAINT FK_9CDAB52B8F93B6FC FOREIGN KEY (movie_id) REFERENCES movies (id);
ALTER TABLE movie_tags ADD CONSTRAINT FK_9CDAB52BBAD26311 FOREIGN KEY (tag_id) REFERENCES tags (id);
ALTER TABLE movie_links ADD CONSTRAINT FK_AFC0BB848F93B6FC FOREIGN KEY (movie_id) REFERENCES movies (id);
ALTER TABLE movie_links ADD CONSTRAINT FK_AFC0BB84ADA40271 FOREIGN KEY (link_id) REFERENCES Link (id);
